<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dish Bot</title>
    <link rel="stylesheet" href="static/css/styles.css">
    <link rel="icon" href="static/images/icon-plate.webp">
</head>
<body>
    <h1>{{ test_today }}</h1>
    <div class="container">
        <div class="column1">
            {% if person.pointsNeeded != '0' %}
                <h2>Points Needed: {{ person.pointsNeeded }}</h2>
            {% endif %}
        </div>
    </div>    

    <div id="dish-columns">
        {% for month, dishes in [('September', september_objects), ('October', october_objects), ('November', november_objects), ('December', december_objects)] %}
        <div class="month-column">
            <h2>{{ month }}</h2>
            {% for dish in dishes %}
                {% if dish.type == 'lunch' or (dish.weekday|lower == 'sunday' and dish.type == 'dinner') %}
                    <h3>{{ dish.weekday }}, {{ dish.day }}</h3>
                {% endif %}
                <li>
                    <span class="dish-type">{{ dish.type }}</span>
                    {% if not dish.owner and user != 'admin' %}
                        <button class="claim-button" onclick="changeOwner('{{ month|lower }}', '{{ dish.id }}')">Claim</button>
                    {% elif dish.owner == user %}
                        <button class="claim-button" onclick="unclaim('{{ month|lower }}', '{{ dish.id }}')">Unclaim</button>
                    {% else %}
                        <span class="dish-owner {% if not dish.owner %}highlight-owner{% endif %}">Owner: {{ dish.owner if dish.owner else 'None' }}</span>
                    {% endif %}
                </li>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

    <script>
        const user = "{{ user }}";
    </script>
    <script src="static/js/script.js"></script>
</body>
</html>
